# Покажчики

[Перелік лекцій](README.md)

## Узагальнено про покажчики

У C++ покажчик - це змінна, яка містить адресу пам'яті іншої змінної. За допомогою покажчиків можна звертатися до об'єктів і виконувати різні операції з пам'яттю, такі як виділення та звільнення пам'яті, передача аргументів в функції за посиланням і т.д.

Загальний формат опису покажчика має вигляд:

```
тип *ім’я;
```

де: 
**тип** — тип значень, на який вказує покажчик;

**ім’я** — ім’я змінної-покажчика;

**\*** — операція над типом, що читається «покажчик на тип».

Наприклад:

```cpp
int *рn; // покажчик на ціле значення;
float *pf1, *pf2; // два покажчики на дійсні значення.
```

## Операції з покажчиками

У мові програмування C++, покажчики дозволяють працювати з адресами змінних, не прив'язуючись до конкретного імені змінної, та можуть містити адреси будь-яких значень. Важливо зазначити, що у мові C++ є лише дві операції, що стосуються адрес змінних: операція взяття адреси «&», яка повертає адресу змінної, та операція розіменування «*», яка вилучає значення, на яке вказує змінна-покажчик. Також існує адресна константа **NULL** (або **nullptr**), яка означає порожню адресу.

Покажчик може вказувати на типізований об'єкт або на void.

Слід нагадати, що мова C++ налічує лише дві операції, які стосуються адрес змінних, а саме:

**&** — операція взяття адреси («адреса значення»);

**\*** — операція розіменування («значення за адресою»).

Операція взяття адреси «&» застосовується разом зі змін­ною і повертає адресу цієї змінної. Операція розіменування «\*» використовується разом з покажчиками і вилучає значення, на яке вказує змінна-покажчик, розташована безпосередньо після символа «\*».

Оголошення покажчиків можна здійснити одним з таких способів:

```
<тип> *ptr;
<тип> *ptr = <змінна-покажчик>;
<тип> *ptr = &<ім’я змінної>;.
```

Наприклад:
```cpp
int *ptx, b; float у; // оголошені змінна-покажчик ptx та змінні b і у;
float *sp = &у; // покажчику sp присвоюється адреса змінної у;
float *р = sp; // покажчику р присвоюється значення (адреса зна­чення), яке міститься в змінній sp, тобто адреса змінної у.
long *pt;   
long*Uk;   
int *ki, x, h; // оголошення описів.
void *р1, *pt1; // опис двох покажчиків на довільний тип даних.
int *р2, *pt2; // опис двох покажчиків на тип даних int.
```

Покажчик на певний тип можна з'язати із змінною і в подальшому через покажчик маніпулювати значенням змінної. Наприклад:

```cpp
int * pi; // покажчик з іменем pi на тип int
int i;

i = 8;
pi = &i; // pi вказує на i
*pi = 10; // i = 10
```
Нижче надано схему роботи покажчика на тип int та його зв'язок зі змінною.

![Іллюстрація роботи покажчика на тип int](img/12-010.png)

Іллюстрація роботи покажчика на тип int



## Нульові покажчики
Нульовий покажчик (null pointer) - це покажчик, який не вказує на жоден об'єкт. Якщо ми не хочемо, щоб покажчик вказував на якусь конкретну адресу, ми можемо присвоїти йому умовне нульове значення. Для визначення нульового покажчика можна ініціалізувати покажчик нулем або константою `nullptr` або `NULL`:
```cpp
int *p1{nullptr};
int *p2=NULL;
int *p3=0;
```

## Покажчики та динамічна пам'ять

Коли програма виділяє об'єкт у купі пам'яті, вона отримує адресу цього об'єкту у вигляді покажчика. Такі покажчики називаються покажчиками-власниками. Щоб явно звільнити об'єкт, виділений у купі, необхідно використовувати покажчик-володіння (або його копію), коли він більше не потрібен. Помилка при звільненні пам'яті призводить до витоку пам'яті та робить її недоступною для будь-якої іншої програми на комп'ютері. Пам'ять, виділена за допомогою new, повинна бути звільнена за допомогою delete (або delete[]).

Також, покажчики в С++ можна використовувати для передачі аргументів у функції за посиланням, що дозволяє уникнути копіювання даних та прискорити виконання програми.

Окрім того, покажчики можна використовувати для створення динамічних об'єктів, тобто об'єктів, які створюються в пам'яті під час виконання програми.

Незважаючи на корисність покажчиків, використання невірних адрес та інших помилок при роботі з покажчиками може призвести до серйозних проблем з пам'яттю та небезпек для програми, тому необхідно дотримуватися відповідних правил та засобів безпеки при роботі з покажчиками.